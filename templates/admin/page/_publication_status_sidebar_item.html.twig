{% macro modalDialogPage(id, status, confirmActionLabel, iconName) %}
    <twig:Xutim:Admin:ModalDialog
        class="btn-link text-{{ status.colorClass }} p-0"
        modalDialogColor="{{ status.colorClass }}"
        action="{{ path('admin_publication_status_edit', {id: id, status: status.value}) }}"
        confirmActionLabel="{{ confirmActionLabel }}"
    >
        <twig:Xutim:Admin:Icon name="{{ iconName }}" plain="true" />
    </twig:Xutim:Admin:ModalDialog>
{% endmacro %}

<twig:Xutim:Admin:SidebarItem id="translation-status-item">
    <twig:block name="header">
        {{ 'status'|trans({}, 'admin')|capitalize }}:
    </twig:block>

    <twig:block name="content">
        <span class="badge me-2 text-bg-{{ translation.status.colorClass }}">
            {{ translation.status.name }}
        </span>

        {% if is_granted_translation(content_context_language()) %}
            {%
                from '@XutimCore/admin/page/_publication_status_sidebar_item.html.twig' import modalDialogPage
            %}
            <div>
                {% if translation.status.canBeDrafted() %}
                    {{
                        modalDialogPage(translation.id, constant('Xutim\\CoreBundle\\Entity\\PublicationStatus::Draft'), 'draft'|trans({}, 'admin')|capitalize, 'clipboard')
                    }}
                {% endif %}

                {% if translation.status.canPublish %}
                    {{
                        modalDialogPage(translation.id, constant('Xutim\\CoreBundle\\Entity\\PublicationStatus::Published'), 'publish'|trans({}, 'admin')|capitalize, 'cloud-upload')
                    }}
                {% endif %}

                {% if translation.status.canSubmitForEvaluation %}
                    {{
                        modalDialogPage(translation.id, constant('Xutim\\CoreBundle\\Entity\\PublicationStatus::Evaluation'), 'submit for evaluation'|trans({}, 'admin')|capitalize, 'refresh-alert')
                    }}
                {% endif %}

                {% if translation.status.canBeArchived %}
                    {{
                        modalDialogPage(translation.id, constant('Xutim\\CoreBundle\\Entity\\PublicationStatus::Archived'), 'archive'|trans({}, 'admin')|capitalize, 'archive')
                    }}
                {% endif %}
            </div>
        {% endif %}
    </twig:block>
</twig:Xutim:Admin:SidebarItem>
