{% extends '@XutimCore/admin/settings/settings_layout.html.twig' %}

{% block languageBar %}
    <twig:Xutim:Admin:LanguageContextBar
        class="d-flex justify-content-end align-items-center mb-2"
    />
{% endblock %}

{% block breadcrumbHeader %}
    <twig:Xutim:Admin:Breadcrumbs>
        <li class="breadcrumb-item">
            <a href="{{ path('admin_settings_site') }}">
                {{ 'settings'|trans({}, 'admin')|capitalize }}
            </a>
        </li>
        <li class="breadcrumb-item">Menu</li>
    </twig:Xutim:Admin:Breadcrumbs>
{% endblock %}

{% block settingsBody %}
    <div class="row">
        <div class="col-md-12">
            <h2 class="mb-2 py-2">{{ 'Menu builder'|trans({}, 'admin') }}</h2>

            <div class="card">
                {% if items is not empty %}
                    <ul class="list-unstyled list-group-flush me-2">
                        {% for rootId in rootItemsId %}
                            {{
                                include('@XutimCore/admin/menu/_item_recursive.html.twig', {
                                    node: items[rootId],
                                    item: items[rootId].item,
                                    child: false,
                                    path: path,
                                    selectedItem: selectedItem,
                                })
                            }}
                        {% endfor %}
                    </ul>
                {% else %}
                    <div class="card-body">
                        <p>
                            {{
                                'There are no items in "%locale%" translation.'|trans({'%locale%': content_context_language()|language_name}, 'admin')
                            }}
                        </p>
                        {%
                            if is_granted(constant('Xutim\\CoreBundle\\Entity\\User::ROLE_EDITOR'))
                        %}
                            <p>
                                <a href="{{ path('admin_menu_item_new') }}">
                                    {{
                                        'Add a new menu item'|trans({}, 'admin')
                                    }}
                                </a>
                            </p>
                        {% endif %}
                    </div>
                {% endif %}
            </div>

            {%
                if items is not empty and is_granted(constant('Xutim\\CoreBundle\\Entity\\User::ROLE_EDITOR'))
            %}
                <p class="mt-3">
                    <twig:Xutim:Admin:Button
                        tag="a"
                        variant="link"
                        data-turbo-frame="modal"
                        href="{{ path('admin_menu_item_new') }}"
                    >
                        <twig:Xutim:Admin:Icon name="plus" />
                        {{ 'Add a new menu item'|trans({}, 'admin') }}
                    </twig:Xutim:Admin:Button>
                </p>
            {% endif %}
        </div>
    </div>
{% endblock %}
