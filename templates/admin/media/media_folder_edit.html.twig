{% extends '@XutimCore/admin/modalBase.html.twig' %}

{% set title = 'Edit folder'|trans({}, 'admin') %}

{% block pageTitle %}
    {{ title }}
{% endblock %}

{% block body %}
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">{{ title }}</h3>
        </div>
        <div class="card-body">
            {{ form(form) }}
        </div>
    </div>
{% endblock %}

{% block stream_success %}
    <turbo-stream action="replace" target="page-title-wrapper">
        <template>
            {{ include('@XutimCore/admin/media/_title.html.twig', {
                currentFolder: folder
            }) }}
        </template>
    </turbo-stream>
    <turbo-stream action="replace" target="folder-{{ folder.id }}">
        <template>
            <div
                class="col"
                id="folder-{{ folder.id }}"
                data-controller="drop-target"
                data-drop-target-id-value="{{ folder.id }}"
                data-drop-target-move-url-value="{{ path('admin_media_move_file_to_folder') }}"
                data-action="dragover->drop-target#over dragleave->drop-target#leave drop->drop-target#drop"
            >
                <a
                    class="card card-link"
                    href="{{ admin_path('admin_media_list', {id: folder.id}) }}"
                    data-drop-target-target="folderCard"
                >
                    <div
                        class="card-body d-flex align-items-center gap-2"
                        data-drop-target-target="folderCard"
                    >
                        <twig:Xutim:Admin:Icon name="folder" />
                        <div class="flex-fill">
                            <div class="fw-medium text-truncate">
                                {{ folder.name }}
                            </div>
                            <div class="text-secondary small">
                                {{ folder.children|length|default(0) }}
                                {{ 'folders'|trans({}, 'admin') }},
                                {{ folder.files|length|default(0) }}
                                {{ 'files'|trans({}, 'admin') }}
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </template>
    </turbo-stream>
{% endblock %}
